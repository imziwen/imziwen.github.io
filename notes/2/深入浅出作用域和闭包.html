<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深入浅出作用域、作用域链和闭包 | 子文</title>
    <meta name="description" content="前端学习笔记，前端进阶，大前端">
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.43fe7f7b.css" as="style"><link rel="preload" href="/assets/js/app.52c01ef5.js" as="script"><link rel="preload" href="/assets/js/2.10ea1281.js" as="script"><link rel="preload" href="/assets/js/17.7d4e3dba.js" as="script"><link rel="preload" href="/assets/js/5.201328ee.js" as="script"><link rel="prefetch" href="/assets/js/10.91d54bec.js"><link rel="prefetch" href="/assets/js/11.b3d4cefa.js"><link rel="prefetch" href="/assets/js/12.f2180f70.js"><link rel="prefetch" href="/assets/js/13.1e7b818b.js"><link rel="prefetch" href="/assets/js/14.7dd1ff76.js"><link rel="prefetch" href="/assets/js/15.5f9b3531.js"><link rel="prefetch" href="/assets/js/16.91b3644f.js"><link rel="prefetch" href="/assets/js/18.2ba7234c.js"><link rel="prefetch" href="/assets/js/19.747517b4.js"><link rel="prefetch" href="/assets/js/20.24f05490.js"><link rel="prefetch" href="/assets/js/21.42b3f1aa.js"><link rel="prefetch" href="/assets/js/22.e30ffc5a.js"><link rel="prefetch" href="/assets/js/23.78c4b8b2.js"><link rel="prefetch" href="/assets/js/24.037cbc5e.js"><link rel="prefetch" href="/assets/js/25.fb4aab3c.js"><link rel="prefetch" href="/assets/js/26.9d15d3af.js"><link rel="prefetch" href="/assets/js/27.ed9f2c56.js"><link rel="prefetch" href="/assets/js/28.c0e62b1c.js"><link rel="prefetch" href="/assets/js/29.88a116c8.js"><link rel="prefetch" href="/assets/js/3.d6460f9c.js"><link rel="prefetch" href="/assets/js/4.14be19a7.js"><link rel="prefetch" href="/assets/js/6.8f3875f3.js"><link rel="prefetch" href="/assets/js/7.b6a25c75.js"><link rel="prefetch" href="/assets/js/8.ef7f899f.js"><link rel="prefetch" href="/assets/js/9.e1896e05.js">
    <link rel="stylesheet" href="/assets/css/0.styles.43fe7f7b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/Javascript.gif" alt="子文" class="logo"> <span class="site-name can-hide">子文</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/question/" class="nav-link">小题巩固</a></div><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">打下基础</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/question/" class="nav-link">小题巩固</a></div><div class="nav-item"><a href="/notes/" class="nav-link router-link-active">打下基础</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>调用堆栈</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>作用域闭包</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/2/深入浅出作用域和闭包.html" class="active sidebar-link">深入浅出作用域、作用域链和闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/2/深入浅出作用域和闭包.html#作用域" class="sidebar-link">作用域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/2/深入浅出作用域和闭包.html#全局作用域" class="sidebar-link">全局作用域</a></li><li class="sidebar-sub-header"><a href="/notes/2/深入浅出作用域和闭包.html#函数作用域" class="sidebar-link">函数作用域</a></li><li class="sidebar-sub-header"><a href="/notes/2/深入浅出作用域和闭包.html#块级作用域-词法作用域" class="sidebar-link">块级作用域(词法作用域)</a></li><li class="sidebar-sub-header"><a href="/notes/2/深入浅出作用域和闭包.html#动态作用域" class="sidebar-link">动态作用域</a></li></ul></li></ul></li><li><a href="/notes/2/从作用域链理解闭包.html" class="sidebar-link">从作用域链理解闭包</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>函数</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>关于this</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="深入浅出作用域、作用域链和闭包"><a href="#深入浅出作用域、作用域链和闭包" class="header-anchor">#</a> 深入浅出作用域、作用域链和闭包</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>几乎所有的编程语言最基本的功能之一就是能够储存变量中的值，并且能在之后对这个值进行访问或者修改。事实上，正是这种储存和访问变量的值的能力将状态带给了程序。<br>
若没了<code>状态</code>这个概念，程序虽然能够执行一些简单的任务，但它会受到高度限制，做不到非常有趣。<br>
将变量引入程序后会有几个有意思的问题：<code>它们储存在哪里？</code> <code>程序需要时如何找到它们？</code><br>
这些问题说明需要一套设计良好的规则来储存变量，并且之后可以方便的找到这些变量。这套规则就被称作<strong>作用域</strong> ---《你不知道的 JS(上)》</p></div> <h2 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h2> <h3 id="全局作用域"><a href="#全局作用域" class="header-anchor">#</a> 全局作用域</h3> <p>供所有代码执行的环境，生命周期将存在于整个程序之内。全局作用域中的全局变量能被程序中任何函数访问，虽然好用，可要注意不要滥用哦。</p> <h4 id="显式声明"><a href="#显式声明" class="header-anchor">#</a> 显式声明</h4> <p>带有关键字<code>var</code>(<code>let</code>、<code>const</code>)的声明：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;ziwen&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;func ziwen&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 全局变量会挂到window上</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ƒ () {console.log(&quot;func ziwen&quot;);}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ziwen</span>
</code></pre></div><h4 id="隐式声明"><a href="#隐式声明" class="header-anchor">#</a> 隐式声明</h4> <p>不带有声明关键字的变量，JavaScript 引擎会为你声明一个全局变量。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  c <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//变量c被挂到了全局对象window上了</span>
  <span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><h3 id="函数作用域"><a href="#函数作用域" class="header-anchor">#</a> 函数作用域</h3> <p>属于这个函数的全部变量都可以的在整个函数的范围内使用及复用（在嵌套的作用域中也可以使用）对外是封闭的，外层作用域无法直接访问函数内部的作用域。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;ziwen&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Uncaught ReferenceError: a is not defined</span>
</code></pre></div><p>难道就不能访问函数内部的变量了吗？咋可能，来..</p> <h4 id="通过-return"><a href="#通过-return" class="header-anchor">#</a> 通过 return</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><h4 id="通过闭包"><a href="#通过闭包" class="header-anchor">#</a> 通过闭包</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bb</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> firstv <span class="token operator">=</span> <span class="token string">&quot;zi&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> firstv <span class="token operator">+</span> v<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">outs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">outs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bb</span><span class="token punctuation">(</span><span class="token string">&quot;wen&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ziwen</span>
</code></pre></div><p>稍后再细说闭包</p> <h4 id="立即执行函数"><a href="#立即执行函数" class="header-anchor">#</a> 立即执行函数</h4> <p>形成一个单独的函数作用域</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> v <span class="token operator">=</span> <span class="token string">&quot;zi&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;my name is ziwen&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div><h3 id="块级作用域-词法作用域"><a href="#块级作用域-词法作用域" class="header-anchor">#</a> 块级作用域(词法作用域)</h3> <h3 id="动态作用域"><a href="#动态作用域" class="header-anchor">#</a> 动态作用域</h3> <div><div id="vcomments"></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/1/执行上下文栈与变量对象.html" class="prev">执行上下文栈与变量对象</a></span> <span class="next"><a href="/notes/2/从作用域链理解闭包.html">从作用域链理解闭包</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.52c01ef5.js" defer></script><script src="/assets/js/2.10ea1281.js" defer></script><script src="/assets/js/17.7d4e3dba.js" defer></script><script src="/assets/js/5.201328ee.js" defer></script>
  </body>
</html>
