(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{384:function(t,s,n){"use strict";n.r(s);var a=n(25),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"模板编译"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#模板编译"}},[t._v("#")]),t._v(" 模板编译")]),t._v(" "),n("blockquote",[n("p",[t._v("每天都在写模板，写 "),n("code",[t._v("template")]),t._v("，这都是些什么鬼？不行了，必须得研究一下模板编译")])]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",[t._v("模板编译前，要明白以下几点")]),t._v(" "),n("ul",[n("li",[t._v("模板不是 "),n("code",[t._v("html")]),t._v("，有指令、插值、"),n("code",[t._v("JavaScript")]),t._v(" 表达式、判断、循环")]),t._v(" "),n("li",[n("code",[t._v("html")]),t._v(" 是标签语言，只有 "),n("code",[t._v("JavaScript")]),t._v(" 才能实现逻辑判断，循环等(前端中只有 "),n("code",[t._v("JavaScript")]),t._v(" 才是图灵完备语言)")]),t._v(" "),n("li",[t._v("模板编译一定是转换为某种"),n("code",[t._v("JavaScript")]),t._v("代码，即"),n("strong",[t._v("模板编译")])])])]),n("h3",{attrs:{id:"调查得知-模板编译与一个神秘而又低调的-with-函数密切相关"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#调查得知-模板编译与一个神秘而又低调的-with-函数密切相关"}},[t._v("#")]),t._v(" 调查得知，模板编译与一个神秘而又低调的 "),n("code",[t._v("with()")]),t._v("函数密切相关：")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/with",target:"_blank",rel:"noopener noreferrer"}},[t._v("with()语法，这货在平时工作中基本用不到"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with()函数")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" obj "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 改变自由变量的查找方式")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将{}内的自由变量，当做obj的属性来查找")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 了解这个将为模板编译的认知带来非常大的帮助")]),t._v("\n")])])]),n("ul",[n("li",[n("code",[t._v("npm")]),t._v("初始化一个项目")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("npm init "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("y\n")])])]),n("ul",[n("li",[t._v("安装 "),n("code",[t._v("vue-template-compiler")])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("npm i vue"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("template"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("compiler "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("s\n")])])]),n("ul",[n("li",[t._v("当前目录新建一个 JS 文件")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("touch index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n")])])]),n("h3",{attrs:{id:"index-js-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#index-js-文件"}},[t._v("#")]),t._v(" index.js 文件")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" compiler "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue-template-compiler"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模板插值")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" template "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<p>{{message}}</p>")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 编译")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前目录执行 node index.js")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印如下，有没有发现with()大哥")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with(this){return _c('p',[_v(_s(message))])}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 有没有发现_c特别像h函数")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其实：")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// _c在源码中定义的意思是:createElement")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// _v在源码中定义的意思是:createTextVNode")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// _s在源码中定义的意思是:toString")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  with(this){return createElement('p',[createTextVNode(toString(message))])}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其实就是等价于上面的写法，createElement返回vnode,")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 那么在with()的加持下，message要从哪去找呢？当然是this，就是当前组件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 因此this.data拿到了当前组件的data对象中的message")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//*********************************************")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 表达式")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" template1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<p>{{ flag ? message:'no message' }}</p>")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with(this){return _c('p',[_v(_s(flag ? message:'no message'))])}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结合模板插值中的描述，不难发现，其实表达式就是执行了那段JS代码，并不神秘")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//*********************************************")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 属性与动态属性")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" template2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('<div id="ziwen" class="wenzi">\n                        <img :src="imgUrl"/>\n                   </div>')]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印如下")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with (this) {")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//  return _c("div", { staticClass: "wenzi", attrs: { id: "ziwen" } }, [')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    _c("img", { attrs: { src: imgUrl } })')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  ]);")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// imgUrl是一个变量，会从this.imgUrl中获得，然后赋值。")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//*********************************************")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 条件")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" template3 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("<div>\n                        <p v-if=\"flag === 'ziwen'\">A</p>\n                        <p v-else>B</p>\n                   </div>")]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res3 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res3"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打印如下")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with (this) {")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//  return _c("div", [')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    flag === "ziwen" ? _c("p", [_v("A")]) : _c("p", [_v("B")])')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  ]);")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v-if和v-else直接变成了三元表达式，从而来确定渲染哪一个。")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//*********************************************")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v-for循环")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" template4 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('<ul>\n                        <li v-for="item in list" :key="item.id">{{item.title}}</li>\n                   </ul>')]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res4 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with (this) {")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  return _c(")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    "ul",')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    _l(list, function(item) {")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//      return _c("li", { key: item.id }, [_v(_s(item.title))]);')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    }),")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    0")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  );")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// _l意思是renderList,_l接收要循环的对象或者数组，进行加工然后返回所要渲染的内容。")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//*********************************************")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 事件")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" template5 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('<button @click="comeon">提交</button>')]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res5 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with (this) {")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//  return _c("button", { on: { click: comeon } }, [_v("提交")]);')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// comeon为点击事件，从this中获取，this.comeon()")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//*********************************************")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// v-model")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" template6 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('<input type="text" v-model="name">')]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res6 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" compiler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compile")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("template6"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res6"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n  with (this) {\n  return _c("input", {\n    directives: [\n      { name: "model", rawName: "v-model", value: name, expression: "name" }\n    ],\n    attrs: { type: "text" },\n    domProps: { value: name }, // 重要\n    on: { // 重要\n      input: function($event) {\n        if ($event.target.composing) return;\n        name = $event.target.value; // 重要\n      }\n    }\n  });\n}\n**/')]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建此input的时候，value值指向this.name，同时已经为此绑定了一个input事件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 实时更新name，结合wathcer实现双向数据绑定")]),t._v("\n")])])]),n("h3",{attrs:{id:"以上"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#以上"}},[t._v("#")]),t._v(" 以上")])])}),[],!1,null,null,null);s.default=e.exports}}]);